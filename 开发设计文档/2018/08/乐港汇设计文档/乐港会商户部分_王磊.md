## 乐港会商户部分
### 一： 需求列表
+ h5商户列表展示
+ h5商户模糊搜索
+ h5商户详情展示
+ 管理台商户列表展示
+ 管理台新增商户
+ 管理台商户信息更新
+ 管理台商户信息查看
+ 管理台商户的显示隐藏操作
### 二： 需求详情
#### 1） h5商户列表展示
##### 页面逻辑
- 在微信端的福利商户页面展示商户主图，页面首次次加载20个商户。
- 更多商户需上拉加载更多显示，每次加载20个商户。
##### 查询条件排序规则
- 展示状态为显示的商家，
- 按照权重字段排序，权重值越大，排在越靠前。
#### 2） h5商户模糊搜索
##### 页面逻辑
- 点击放大镜进行商户名称查询，支持模糊查询按匹配度正向排序。
- 点击查询后在表头出现输入法进行信息输入。
##### 查询条件排序规则
- 按照关键字（key）根据商户名（merchantName）模糊查询，展示状态为显示的商家。
- 根据匹配度(key.length/merchantName.length)排序。
#### 3） h5商户详情展示
##### 页面逻辑
- 商户详情内商户名称固定显示，其余信息不维护则不显示。
- 福利说明显示两行文字其余说明点击展示。
- 商户地址显示一行不下时在第二行显示，最多显示两行，更多用省略号代替。
- 点击商户电话在屏幕下方滑动展示商户电话号码，点击号码可以唤起拨号功能，点击空白或取消号码下移隐藏。
- 点击商户地址则调用本机地图。
#### 4） 管理台商户列表展示
##### 页面逻辑
- 一个管理台商户列表的表格，表格包括商户ID、商户名称、二级菜单、创建时间、更新时间、权重值、操作字段。
- 有页码每页数量选择。
##### 查询条件排序规则
- 查询字段为商户ID、商户名称、每页数量、页数。
- 排序按照权重排序。
#### 5） 管理台新增商户
##### 页面逻辑
- 新增商户除二级菜单、商户名称和主图都是非必填字段。
- 所有未填写信息不显示在h5页面。
- 点击保存直接保存并展示无提示，跳转至商户管理。
- 点击关闭直接关闭无提示，跳转至商户管理。
##### 字段说明

字段 | 说明
---|---
商户ID说明 | 固定9位在新增时为商户创建，ID规则创建年月日+创建排序。Ps.2018年6月4日第一创建的商户ID为180604001，第二个商户ID180604002。
二级菜单（二期） | 只能选择系统已提供分类，没有对应二级菜单时不能选择（上线前和品宣确认）
商户名称 | 无输入限制，但是必填
商户主图 | 由品宣上传，直接展示在二级页面上（图片尺寸确认—前端，只限宽不限高）
商户相册 | 图片展示在前端商户详情页最上方，最多上传5张相册图，按上传顺序倒序展示图片（图片尺寸确认—前端）
商户地址 | 省市区通过枚举形式选择，详细地址无字数限制
商户电话 | 最多可填2个，填写则显示在前端，2个文本框固定显示
商户权重值 | 手动输入1000内不可重复数值，数值越大同分类中排序越靠前
福利折扣 | 折扣数值范围0.1—10.0，10.0时无折扣，前端不显示折扣字段，支持一位小数
核销账户（二期） | 核销账户只能通过点击“+”添加乐港汇会员，通过手机号匹配，新增后可以添加第二个核销账户添加后可以删除，不限核销账户数量。
福利说明 | 添加商户福利使用说明PS.使用时间段、使用规则及备注等
商户介绍 | 采用富文本编辑器支持上传图片、音乐、视频
微信卡券 | 二期添加
##### 数据变动
- 新增成功后在商户表（hp_merchant）新增一条记录
- 要是有几张照片就在在商户相册表（hp_merchant_picture）新增几条记录。
#### 6） 管理台商户信息更新
##### 页面逻辑
- 可编辑商户全部新建填写信息。
- 点击编辑进入编辑信息页面
##### 数据变动
- 根据id更新商户表（hp_merchant）数据。
- 根据商户id对商户表（hp_merchant_picture）进行删除旧图片再插入新图片记录。
#### 7） 管理台商户信息查看
##### 页面逻辑
- 点击查看进入商户添加时填写的信息界面，展示商户详细信息，不可编辑。
#### 8） 管理台商户的显示隐藏操作
##### 页面逻辑
- 点击显示改变商户显示状态为显示（Y）。
- 点击隐藏改变商户显示状态为隐藏（N）。
##### 数据变动
- 根据id更新商户表（hp_merchant）的display_status字段。